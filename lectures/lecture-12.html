<!DOCTYPE html>
<html>
  <HEAD>
    <LINK href="../spd-style.css" rel="stylesheet" type="text/css">
  </HEAD>
  
  <body>

    <p>[<a href="index.html">Index of Lectures</a>]</p>

    <p>
      [
      <a href="lecture-01.html">L01</a>
      <a href="lecture-02.html">L02</a>
      <a href="lecture-03.html">L03</a>
      <a href="lecture-04.html">L04</a>
      <a href="lecture-05.html">L05</a>
      <a href="lecture-06.html">L06</a>
      <a href="lecture-07.html">L07</a>
      <a href="lecture-08.html">L08</a>
      <a href="lecture-09.html">L09</a>
      <a href="lecture-10.html">L10</a>
      <a href="lecture-11.html">L11</a>
      L12
      <a href="lecture-13.html">L13</a>
      <a href="lecture-14.html">L14</a>
      <a href="lecture-15.html">L15</a>
      <a href="lecture-16.html">L16</a>
      <a href="lecture-17.html">L17</a>
      <a href="lecture-18.html">L18</a>
      <a href="lecture-19.html">L19</a>
      <a href="lecture-20.html">L20</a>
      <a href="lecture-21.html">L21</a>
      <a href="lecture-22.html">L22</a>
      <a href="lecture-23.html">L23</a>
      ]
    </p>
    
    <h2>Lecture 12&mdash;Local Expressions</h2>
    
    <h3>Before Lecture</h3>

    <p>In this lecture you will learn how to use local expressions, a
    new language construct available in the Intermediate Student
    Language. How local expressions are formed and evaluated is
    covered in the following edX videos. It is critical you understand
    this before coming to lecture, because the lecture itself will be
    focused on how to use local expressions. </p>

    <ul>
      <li>Local - Introduction</li>
      <li>Local - Forming and Intuition</li>
      <li>Local - Lexical Scoping</li>
      <li>Local - Evaluation Rules</li>
    </ul>
    
    <h3>During Lecture</h3>

    <p>There are three principle ways we use local expressions:
      avoiding recursive calls with identical arguments, encapsulating
      2 or more functions, and giving names to intermediate values. We
      will cover the first two in lecture and you will work through
      the third after lecture.</p>

    <p>The starters for this lecture are:</p>

    <ul>
      <li><a href="m07-avoid-recomputation-starter.rkt">m07-avoid-recomputation-starter.rkt</a></li>
      <li><a href="m07-regions-refactoring-starter.rkt">m07-regions-refactoring-starter.rkt</a></li>
      <li><a href="m07-regions-search-starter.rkt">m07-regions-search-starter.rkt</a></li>
    </ul>
	
    
    <h3>After Lecture</h3>

    <p>Today we went through the Local module. You learned before
    class what local means and how it is evaluated. In class we saw
    three important ways to use it. For all three of those we saw a
    refactoring that allows you to take a working program and revise
    it, in a few simple steps, to be an improved program using
    local. They were:</p>

    <ul>
      <li>to avoid duplicate <em>identical</em> recursive calls (these cause exponential performance problems)</li>
      <li>for encapsulation</li>
      <li>to give meaningful names to intermediate values</li>
    </ul>
      
    <p>We saw that for templates involving natural mutual recursions
    you can pre-encapsulate the templates, rather than waiting until
    the functions are designed and then encapsulating them.</p>

    <p>We also saw that when we do encapsulate a set of functions, we
      are not able to test the inner functions. BUT, we can still
      write commented out examples to help us understand how to
      combine those results though! We can write notes beside the
      expressions in our body to help us reason about what it would
      resolve to including the type and what we expected the result to
      be). Such nodes are in the solution posted for you use. You can
      also put @signature and @template-origin tags right in the local
      expression. The edX videos go through a full HtDF process for
      these inner functions directly - this is not necessary but again
      it can be VERY helpful!<p>

    <p>At the very end we saw that sometimes we use local for two
      different purposes in the same function -- encapsulation and
      avoiding redundant calls to a recursive function.</p>

    <p>There's a third way to use local, which is to give meaningful
      names to intermediate values.  Used properly this can make an
      otherwise complex function easier to understand.  You should
      carefully compare the intermediate and final versions of the
      lines function in the solution file.</p>

    <p>In summary there is a language construct called local, that has
      well defined evaluation rules; there are also three classic ways
      of using local. When you decide to use local, you should have a
      clear sense of what you are using the local to accomplish.</p>

    <p>To review today's material re-do the examples from class and
      complete all the starter files. For more practice, look in the
      problem bank for more problems. Local L1 has a video that goes
      along with it if you need more help. The other problems are good
      practice as well.</p>

    <p>The solutions for this lecture are:</p>

    <ul>
      <li><a href="m07-avoid-recomputation-solution.rkt">m07-avoid-recomputation-solution.rkt</a></li>
      <li><a href="m07-regions-refactoring-solution.rkt">m07-regions-refactoring-solution.rkt</a></li>
      <li><a href="m07-regions-search-solution.rkt">m07-regions-search-solution.rkt</a></li>
    </ul>


    <p>Be sure to complete the before lecture section
    of <a href="lecture-13.html">Lecture 13</a> before that
    lecture.</p>

  </body>
</html>
